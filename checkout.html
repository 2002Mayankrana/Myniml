<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>MYNIML - Checkout</title>
    <link rel="icon" href="img/core-img/favicon.ico">
    <link rel="stylesheet" href="css/core-style.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
    <style>
        .order-item {
    margin-bottom: 10px;
}
.order-item p {
    margin: 0;
}
/* Loading overlay styles */
#loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(75, 73, 73, 0.8);
    display: none; /* Hidden by default */
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

#loading-overlay img {
    width: 100px; /* Adjust the size of the spinner */
}


    </style>
</head>
<body>
    <div class="search-wrapper section-padding-100">
        <div class="search-close">
            <i class="fa fa-close" aria-hidden="true"></i>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="search-content">
                        <form action="#" method="get">
                            <input type="search" name="search" id="search" placeholder="Type your keyword...">
                            <button type="submit"><img src="img/core-img/search.png" alt=""></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="main-content-wrapper d-flex clearfix">
        <div class="mobile-nav">
            <div class="amado-navbar-brand">
                <a href="index.html"><img src="img/core-img/logo2.png" alt=""></a>
            </div>
            <div class="amado-navbar-toggler">
                <span></span><span></span><span></span>
            </div>
        </div>

        <header class="header-area clearfix">
            <div class="nav-close">
                <i class="fa fa-close" aria-hidden="true"></i>
            </div>
            <div class="logo">
                <a href="index.html"><img src="img/core-img/logo2.png" alt=""></a>
            </div>
            <nav class="amado-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html#Categories">Shop</a></li>
                    <li><a href="cart.html">Cart</a></li>
                    <li class="active"><a href="checkout.html">Checkout</a></li>
                </ul>
            </nav>
            <div class="amado-btn-group mt-30 mb-100">
                <a href="#" class="btn amado-btn mb-15">%Discount%</a>
                <a href="#" class="btn amado-btn active">New this week</a>
            </div>
            <div class="cart-fav-search mb-100">
                <a href="cart.html" class="cart-nav"><img src="img/core-img/cart.png" alt=""> Cart <span id="cart-count">(0)</span></a>
                <a href="#" class="fav-nav"><img src="img/core-img/favorites.png" alt=""> Favourite</a>
                <a href="#" class="search-nav"><img src="img/core-img/search.png" alt=""> Search</a>
            </div>
            <div class="social-info d-flex justify-content-between">
                <a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a>
                <a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            </div>
        </header>
        <div class="cart-table-area section-padding-100">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12 col-lg-8">
                        <div class="checkout_details_area mt-50 clearfix">
                            <div class="cart-title">
                                <h2>Checkout</h2>
                            </div>
                            <!-- Loading overlay -->
<div id="loading-overlay">
    <img src="img/Animation - 1723192056388.gif" alt="Loading..."> <!-- Replace with your spinner GIF -->
</div>


<form id="checkout-form" action="https://script.google.com/macros/s/AKfycbxjyOlc9Vk5HoPE1xR0KrAfxERQeIeiS2mcP05B7eNQtMV86EQUJeLfTln1DCngeYZu/exec" method="post">
    <div class="row">
        <div class="col-md-6 mb-3">
            <input type="text" class="form-control" id="first_name" name="CLIENT_NAME" placeholder="Full Name" required>
        </div>
        <div class="col-md-6 mb-3">
            <input type="number" class="form-control" id="phone_number" name="CONTACT" placeholder="Phone No" required>
        </div>
        <div class="col-12 mb-3">
            <input type="email" class="form-control" name="EMAIL" id="email" placeholder="Email" required>
        </div>
        <div class="col-md-6 mb-3">
            <input type="text" class="form-control" id="zipCode" name="PINCODE" placeholder="Zip Code" required>
        </div>
        <div class="col-12 mb-3">
            <input type="text" class="form-control mb-3" id="street_address" name="ADDRESS" placeholder="Full Address" required>
        </div>

        <!-- Hidden fields for cart data -->
        <input type="hidden" name="CART_ITEMS" id="cart-items-data">
        <input type="hidden" name="CART_TOTAL" id="cart-total-data">

        <!-- Hidden field for date -->
        <input type="hidden" name="DATE" id="date-field">

        <div class="cart-btn mt-100" style="padding-left: 20px;">
            <button type="submit" class="btn amado-btn w-100">Place Order</button>
        </div>
    </div>
</form>
                        </div>

                        <br><br><br><hr>
                    <h4>OUR POLICIES</h4>
                    <hr><br>
                    <h6>ðŸŒŸ Please Note: As a growing startup, we're currently unable to offer a return policy. We appreciate your understanding and support!</h6>
<br><h6>ðŸ’³ Pay on Delivery: If you opt for pay on delivery in payment process, a small security amount will be charged initially. Rest assured, this amount will be fully credited to you upon delivery. Thank you for your trust and patience!</h6>

                        
                    </div>
                    <div class="col-12 col-lg-4">
                        <div class="cart-summary">
                            <h5>Order Summary</h5>
                            <hr>
                            <div id="order-summary">
                                <!-- Order summary will be dynamically populated here -->
                            </div>
                            <ul class="summary-table">
                                <li><span>Subtotal:</span> <span id="cart-subtotal">$0.00</span></li>
                                <li><span>Delivery:</span> <span id="cart-delivery">$0.00</span></li>
                                <li><span>Total:</span> <span id="cart-total">$0.00</span></li>
                            </ul>
                            <hr>
                            <p style="font-size:medium;"> Delivery charges may vary based on location, we will update you during the confirmation. </p>
                            <hr><p style="font-size: small;">Once you Place the Order, we will connect with you on Whatsapp or Mail for the confirmation of order and Payment Process.</p>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>

    <script src="js/jquery/jquery-2.2.4.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/active.js"></script>
    
    <script>
       document.addEventListener('DOMContentLoaded', function() {
    updateCheckoutCart();

    function updateCheckoutCart() {
        const orderSummaryContainer = document.getElementById('order-summary');
        const cartSubtotalElement = document.getElementById('cart-subtotal');
        const cartTotalElement = document.getElementById('cart-total');
        const cartDeliveryElement = document.getElementById('cart-delivery');

        const cartItemsDataInput = document.getElementById('cart-items-data');
        const cartTotalDataInput = document.getElementById('cart-total-data');
        var currentDate = new Date().toISOString().split('T')[0];
        // Set the value of the hidden date field
        document.getElementById('date-field').value = currentDate;

        const cart = JSON.parse(sessionStorage.getItem('cart')) || [];

        let subtotal = 0;
        let delivery = 100; // Fixed delivery charge

        orderSummaryContainer.innerHTML = ''; // Clear previous content
        let cartItemsData = [];

        cart.forEach((item) => {
            const itemSummary = document.createElement('div');
            itemSummary.classList.add('order-item');
            itemSummary.innerHTML = `
                <span><strong>${item.name}</strong> (${item.quantity})</span>
            `;
            orderSummaryContainer.appendChild(itemSummary);

            subtotal += item.price * item.quantity;

            cartItemsData.push({
                name: item.name,
                quantity: item.quantity,
                price: item.price
            });
        });

        const total = subtotal + delivery;

        cartSubtotalElement.innerText = `Rs ${subtotal.toFixed(2)}`;
        cartDeliveryElement.innerText = `Rs ${delivery.toFixed(2)}`;
        cartTotalElement.innerText = `Rs ${total.toFixed(2)}`;

        // Update hidden inputs with serialized data
        cartItemsDataInput.value = JSON.stringify(cartItemsData);
        cartTotalDataInput.value = total.toFixed(2);
    }

    const form = document.getElementById('checkout-form');
    form.addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent default form submission

        const submitButton = document.querySelector('button[type="submit"]');
        submitButton.disabled = true;
        submitButton.innerText = 'Placing...'; // Updated to innerText

        // Show loading overlay
        const loadingOverlay = document.getElementById('loading-overlay');
        loadingOverlay.style.display = 'flex'; // Show the overlay
        document.body.style.opacity = '0.5'; // Fade the page

        setTimeout(() => {
            const formData = new FormData(form);
            const xhr = new XMLHttpRequest();
            xhr.open('POST', form.action);
            xhr.onload = function() {
                if (xhr.status === 200) {
                    // Clear the cart from sessionStorage
                    sessionStorage.removeItem('cart');

                    // Show success popup using SweetAlert2
                    Swal.fire({
                        icon: 'success',
                        title: 'Order Placed!',
                        text: 'Thank you for placing your order. We will update you further.',
                        confirmButtonText: 'OK'
                    }).then(() => {
                        window.location.href = 'index.html'; // Redirect to homepage
                    });
                } else {
                    // Handle error
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'There was an error with your submission. Please try again.'
                    }).then(() => {
                        submitButton.disabled = false;
                        submitButton.innerText = 'Place Order'; // Updated to innerText
                    });
                }

                // Hide loading overlay
                loadingOverlay.style.display = 'none'; // Hide the overlay
                document.body.style.opacity = '1'; // Reset page opacity
            };
            xhr.send(formData);
        }, 1000); // Simulate a delay for 1 second before sending the form data
    });
});

    </script>
    
    
</body>
</html>










